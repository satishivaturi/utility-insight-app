<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utility Insight</title>
</head>
<body>
    <h1>Utility Insight App</h1>
    <p>Upload your Green Button XML file to see your energy usage!</p>

    <input type="file" id="fileInput" accept=".xml" />
    <button onclick="handleFile()">Upload and Analyze</button>

    <pre id="output"></pre>

    <script>
    function handleFile() {
        const fileInput = document.getElementById('fileInput');
        const output = document.getElementById('output');

        if (fileInput.files.length === 0) {
            alert('Please select a file first!');
            return;
        }

        const reader = new FileReader();
        reader.onload = function(e) {
            const text = e.target.result;

            // Parse XML
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(text, "text/xml");

            // Example: Read first Bill info
            const date = xmlDoc.getElementsByTagName('Date')[0]?.textContent || 'No Date Found';
            const usage = xmlDoc.getElementsByTagName('Usage')[0]?.textContent || 'No Usage Found';
            const cost = xmlDoc.getElementsByTagName('Cost')[0]?.textContent || 'No Cost Found';

            // Display nicely
            output.innerHTML = `
                <h2>Latest Bill Details:</h2>
                <p><strong>Date:</strong> ${date}</p>
                <p><strong>Usage:</strong> ${usage} kWh</p>
                <p><strong>Cost:</strong> $${cost}</p>
            `;
        };
        reader.readAsText(fileInput.files[0]);
    }
</script>
</body>
</html>
